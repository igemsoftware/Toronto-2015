<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=1024">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Meta Flux - a Web based tool for interactive flux balance analsis | by iGEM UofT</title>
    
    <meta name="generator" content="Slide Show (S9)">
    <meta name="author" content="iGEM UofT">
    
    <!-- Custom CSS just for this page -->
    <link rel="stylesheet" href="metaflux.css">
    
    <link rel="apple-touch-icon" href="apple-touch-icon.png" >
</head>

<body class="impress-not-supported">

<div id="impress">

    <!-- note: assumes no header (breaking slides w/ SLIDE directive) -->

    <div class='step slide' data-x='0' data-y='0' >
      <!-- === begin markdown block ===

      generated by markdown/1.2.0 on Ruby 2.0.0 (2015-04-13) [universal.x86_64-darwin15]
                on 2015-08-15 02:00:04 -0400 with Markdown engine kramdown (1.8.0)
                  using options {}
  -->

<!-- _S9SLIDE_  slide x=0 y=0 -->

<canvas id="canvas"></canvas>


    </div>

    <div class='step slide' data-x='1000' data-y='0' >
      <!-- _S9SLIDE_  slide x=1000 y=0 -->

<p><span style="position: absolute; top: 0%; left: 15%;">Tailings Ponds Bioremediation</span></p>

<p><img src="./img/tailings-pond.jpg" class="fullWidth" /></p>


    </div>

    <div class='step slide' data-x='500' data-y='1000' data-scale='2' >
      <!-- _S9SLIDE_  slide x=500 y=1000 scale=2 -->

<p><span class="absHeading">microbial consortia</span>
<img src="./img/consortia.jpg" style="width: auto; height: 550px;" /></p>


    </div>

    <div class='step slide' data-x='500' data-y='2500' data-scale='3' >
      <!-- _S9SLIDE_  slide x=500 y=2500 scale=3 -->

<p><span class="vCenter" style="background-color: rgba(255,255,255,0.8); border-radius: 5px; border: 2px solid black;">
How do I optimize the biomass of toluene degrading bacteria?
</span></p>


    </div>

    <div class='step slide' data-x='2800' data-y='1500' data-z='1000' data-rotate='-90' data-scale='4' >
      <!-- _S9SLIDE_  slide x=2800 y=1500 z=1000 rotate=-90 scale=4 -->

<p>FBA:= Flux Balance Analysis
<img src="./img/fba.gif" style="height: 500px; width: auto;" /></p>

<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

<script src="http://45.55.193.224/fba-webapp-fresh/src/lib/bundle-coffee.js"></script>

<script type="text/javascript">
// rAF polyfill in external js file

main = function() {
	// Declare some globals
	var canvas = document.getElementById('canvas');
	var ctx = canvas.getContext('2d');
	var W = $('#step-1').width();
	var H = $('#step-1').height();
	var cx = parseInt(W/2);
	var cy = parseInt(H/2);
  var startTime = (new Date()).getTime();

	// Set the canvas dimensions
	canvas.width = W;
	canvas.height = H;

	// Parameters
	var bgColour = '#212121';

  // Animation object
	window.ANIM = window.ANIM || {};

	ANIM.pause = function() {
		window.cancelAnimationFrame(ANIM.core.animationFrame);
	};

	ANIM.play = function() {
		ANIM.core.then = Date.now();
		ANIM.core.frame();
	};

	ANIM.core = {
		frame: function() {
			ANIM.core.setDelta();
			ANIM.core.update();
			ANIM.core.render();
			ANIM.core.animationFrame = window.requestAnimationFrame(ANIM.core.frame);
		},
		setDelta: function() {
			ANIM.core.now = Date.now();
			ANIM.core.delta = (ANIM.core.now - ANIM.core.then) / 1000;
			// seconds since last frame
			ANIM.core.then = ANIM.core.now;
		},
		update: function() {
			// Update values here
      var timeDelta = (new Date()).getTime();
      circles.forEach(function(circle){
        circle.y += Math.sin((timeDelta * 2*Math.PI) / circle.xPeriod ) * circle.xMultiplier;
      	circle.x += Math.cos((timeDelta * 2*Math.PI) / circle.yPeriod ) * circle.yMultiplier;
      });
      lines = genLines();
		},
		render: function() {
      // clear and render new frame
			clearCanvas();
      circles.forEach(function(circle){
        drawCircle(circle);
      });
      lines.forEach(function(line) {
        drawLine(line);
      });
      ctx.font="20px Ubuntu";
      ctx.fillText("iGEM UofT",cx-220,cy+20);
      ctx.font="40px Ubuntu";
			ctx.fillText("computational",cx-220,cy+60);
      ctx.fillText("biology",cx-160,cy+100);
		}
	};

	// Fill canvas with bgColour
	clearCanvas();

  // Initialize objects here
  var circles = [{
    x: cx-75,
    y: cy-30,
    r: 20,
    xPeriod: 1000,
    yPeriod: 250,
    xMultiplier: 1,
    yMultiplier: 1,
    arcWidth: 10,
    colour: 'grey',
    fill: true
  }, {
    x: cx+75,
    y: cy+20,
    r: 20,
    xPeriod: 250,
    yPeriod: 250,
    xMultiplier: 1,
    yMultiplier: 1,
    arcWidth: 10,
    colour: 'grey',
    fill: true
  }, {
    x: cx-40,
    y: cy-80,
    r: 10,
    xPeriod: 1000,
    yPeriod: 2000,
    xMultiplier: 1,
    yMultiplier: 1,
    arcWidth: 2,
    colour: 'grey',
    fill: false
  }, {
    x: cx+120,
    y: cy-40,
    r: 10,
    xPeriod: 3000,
    yPeriod: 4000,
    xMultiplier: 1,
    yMultiplier: 1,
    arcWidth: 2,
    colour: 'grey',
    fill: false
  }, {
    x: cx+50,
    y: cy+100,
    r: 10,
    xPeriod: 1000,
    yPeriod: 1000,
    xMultiplier: 1,
    yMultiplier: 1,
    arcWidth: 2,
    colour: 'grey',
    fill: false
  }]

  var lines = genLines();

	// Start the animation
	ANIM.play();

	// Functions
	function clearCanvas() {
		ctx.fillStyle = bgColour;
		ctx.fillRect(0, 0, W, H);
	}

  function drawCircle(circle) {
		ctx.beginPath();
		ctx.arc(circle.x,circle.y,circle.r,0,2*Math.PI);
		ctx.lineWidth = circle.arcWidth;
		ctx.strokeStyle = circle.colour;
    ctx.fillStyle = circle.colour;
		ctx.stroke();
    if (circle.fill) {
      ctx.fill();
    }
	}

  function drawLine(line) {
   	ctx.beginPath();
    ctx.moveTo(line.x1, line.y1);
    ctx.lineTo(line.x2, line.y2);
    ctx.lineWidth = line.width;
    ctx.strokeStyle = line.colour;
    ctx.stroke();
  }

  function genLines() {
    var lines = new Array();

    lines.push({
      x1: circles[0].x,
      y1: circles[0].y,
      x2: circles[1].x,
      y2: circles[1].y,
      width: 5,
      color: 'grey'
    }, {
      x1: circles[0].x,
      y1: circles[0].y,
      x2: circles[2].x,
      y2: circles[2].y,
      width: 2,
      color: 'grey'
    }, {
      x1: circles[1].x,
      y1: circles[1].y,
      x2: circles[3].x,
      y2: circles[3].y,
      width: 2,
      color: 'grey'
    }, {
      x1: circles[1].x,
      y1: circles[1].y,
      x2: circles[4].x,
      y2: circles[4].y,
      width: 2,
      color: 'grey'
    });

    return lines;
  }
}

window.onload = function() {
	main();
}

</script>

<!-- === end markdown block === -->

    </div>


</div>

<script src="js/impress.js"></script>
<script>impress().init();</script>

</body>
</html>